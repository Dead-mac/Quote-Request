
import React from 'react';
import { CheckIcon } from './icons/CheckIcon';

export const FormField: React.FC<{
  label: string;
  id: string;
  name: string;
  value: string;
  onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;
  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;
  error?: string;
  placeholder?: string;
  as?: 'textarea';
  rows?: number;
  success?: boolean;
}> = ({ label, id, as, error, success, ...props }) => {
  const errorId = `${id}-error`;
  const hasError = !!error;
  const commonClasses = `w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-colors duration-200 ${
    hasError
      ? 'border-red-500 focus:border-red-500 focus:ring-red-500/20'
      : success
      ? 'border-green-500 bg-green-50/50 focus:border-green-500 focus:ring-green-500/20'
      : 'border-zinc-300 hover:border-zinc-400 focus:border-teal-500 focus:ring-teal-500/20'
  }`;
  
  return (
    <div className={as === 'textarea' ? 'md:col-span-2' : ''}>
      <label htmlFor={id} className="block text-sm font-medium text-zinc-700 mb-1">
        {label}
      </label>
      {as === 'textarea' ? (
        <textarea id={id} {...props} className={commonClasses} aria-invalid={hasError} aria-describedby={hasError ? errorId : undefined} />
      ) : (
        <input type="text" id={id} {...props} className={commonClasses} aria-invalid={hasError} aria-describedby={hasError ? errorId : undefined} />
      )}
      {hasError && <p id={errorId} className="text-red-600 text-xs mt-1">{error}</p>}
    </div>
  );
};

export const RadioGroup: React.FC<{
  legend: React.ReactNode;
  name: string;
  options: { label: string; value: string }[];
  selectedValue: string;
  onChange: (value: string) => void;
}> = ({ legend, name, options, selectedValue, onChange }) => (
  <fieldset className="md:col-span-2">
    <legend className="text-sm font-medium text-zinc-700 mb-2">{legend}</legend>
    <div className="flex items-center gap-x-6">
      {options.map(option => (
        <div key={option.value} className="flex items-center">
          <input
            id={`${name}-${option.value}`}
            name={name}
            type="radio"
            value={option.value}
            checked={selectedValue === option.value}
            onChange={(e) => onChange(e.target.value)}
            className="h-4 w-4 border-zinc-300 text-teal-600 focus:ring-teal-600"
          />
          <label htmlFor={`${name}-${option.value}`} className="ml-2 block text-sm text-zinc-900">
            {option.label}
          </label>
        </div>
      ))}
    </div>
  </fieldset>
);


export const FormSection: React.FC<{ title: string; children: React.ReactNode; intro?: string }> = ({ title, children, intro }) => (
  <fieldset className="mt-10 border-t border-zinc-200 pt-6">
    <legend className="text-xl font-bold text-zinc-800">{title}</legend>
    {intro && <p className="text-sm text-zinc-500 mt-1">{intro}</p>}
    <div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-4">
      {children}
    </div>
  </fieldset>
);

interface SelectionCardProps {
    title: string;
    icons?: React.ReactNode;
    subtext?: string;
    selected: boolean;
    onClick: () => void;
    className?: string;
}

export const SelectionCard: React.FC<SelectionCardProps> = ({ title, icons, subtext, selected, onClick, className = '' }) => (
    <button
        type="button"
        onClick={onClick}
        className={`relative text-left w-full h-full p-5 rounded-xl border-2 hover:border-teal-500 transition-all duration-300 ease-in-out transform hover:scale-105 flex flex-col justify-center ${
            selected ? 'bg-teal-50 border-teal-600 scale-105 shadow-lg ring-2 ring-teal-500 ring-offset-2' : 'bg-white border-zinc-200'
        } ${className}`}
    >
        {selected && (
            <div className="absolute top-2 right-2 w-6 h-6 bg-teal-600 rounded-full flex items-center justify-center text-white">
                <CheckIcon className="w-4 h-4"/>
            </div>
        )}
        <div className="flex items-center gap-3">
             {icons && (
                <div className="flex-shrink-0 flex items-center gap-1 text-teal-600">
                    {icons}
                </div>
            )}
            <span className="font-bold text-zinc-800">{title}</span>
        </div>
        {subtext && <p className="text-sm text-zinc-500 mt-2">{subtext}</p>}
    </button>
);
